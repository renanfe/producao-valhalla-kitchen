FROM openjdk:17-alpine
ARG POSTGRES_DB
ARG POSTGRES_USERNAME
ARG POSTGRES_PASSWORD
ARG POSTGRES_HOST
ARG SPRING_PROFILE
ENV POSTGRES_DB=${POSTGRES_DB}
ENV POSTGRES_USERNAME=${POSTGRES_USERNAME}
ENV POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
ENV POSTGRES_HOST=${POSTGRES_HOST}
ENV SPRING_PROFILE=${SPRING_PROFILE}
COPY ./producao-valhalla-kitchen-1.0.jar /usr/src/myapp/app.jar
WORKDIR /usr/src/myapp
ENTRYPOINT java -Dspring.profiles.active="$SPRING_PROFILE" -jar app.jar