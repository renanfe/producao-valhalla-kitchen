FROM openjdk:17-alpine
ARG MONGODB_DATABASE
ARG MONGODB_USERNAME
ARG MONGODB_PASSWORD
ARG MONGODB_HOST
ARG AWS_ACCESS_KEY
ARG AWS_SECRET_KEY
ARG AWS_REGION
ARG SPRING_PROFILE
ENV MONGODB_DATABASE=${MONGODB_DATABASE}
ENV MONGODB_USERNAME=${MONGODB_USERNAME}
ENV MONGODB_PASSWORD=${MONGODB_PASSWORD}
ENV MONGODB_HOST=${MONGODB_HOST}
ENV AWS_ACCESS_KEY=${AWS_ACCESS_KEY}
ENV AWS_SECRET_KEY=${AWS_SECRET_KEY}
ENV AWS_REGION=${AWS_REGION}
ENV SPRING_PROFILE=${SPRING_PROFILE}
COPY ../target/producao-valhalla-kitchen-1.0.jar /usr/src/myapp/app.jar
WORKDIR /usr/src/myapp
ENTRYPOINT java -Dspring.profiles.active="$SPRING_PROFILE" -jar app.jar